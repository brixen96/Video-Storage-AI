# Project structure:
# {
#     "prompt": "Analyze the following py project files and their referenced data files. Describe the structure, purpose, and any notable patterns:\n\n# File: node_modules\\flatted\\python\\flatted.py\n# ISC License\n#\n# Copyright (c) 2018-2025, Andrea Giammarchi, @WebReflection\n#\n# Permission to use, copy, modify, and/or distribute this software for any\n# purpose with or without fee is hereby granted, provided that the above\n# copyright notice and this permission notice appear in all copies.\n#\n# THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n# REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n# AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n# INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n# LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE\n# OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n# PERFORMANCE OF THIS SOFTWARE.\n\nimport json as _json\n\nclass _Known:\n    def __init__(self):\n        self.key = []  # List to store keys of known objects\n        self.value = []  # List to store values of known objects\n\nclass _String:\n    def __init__(self, value):  # Constructor for string objects\n        self.value = value  # String content\n\n\ndef _array_keys(value):\n    # Helper function to get keys of an array\n    keys = []  # List to store indices of elements in the array\n    i = 0  # Iterator variable\n    while i < len(value):  # Iterate over each element in the array\n        keys.append(i)  # Append index to the list\n        i += 1  # Increment index\n    return keys  # Return the list of indices\n\ndef _object_keys(value):\n    # Helper function to get keys of a dictionary\n    keys = []  # List to store keys of the dictionary\n    for key in value:  # Iterate over each key in the dictionary\n        keys.append(key)  # Append key to the list\n    return keys  # Return the list of keys\n\ndef _is_array(value):\n    # Helper function to check if a value is an array\n    return isinstance(value, (list, tuple))  # Check for lists or tuples\n\ndef _is_object(value):\n    # Helper function to check if a value is an object\n    return isinstance(value, dict)  # Check for dictionaries\n\ndef _is_string(value):\n    # Helper function to check if a value is a string\n    return isinstance(value, str)  # Check for strings\n\ndef _index(known, input, value):\n    # Function to add an element to the input list and get its index\n    input.append(value)  # Add the value to the input list\n    index = str(len(input) - 1)  # Get the index of the added element in the input list\n    known.key.append(value)  # Store the key of the element in the known object\n    known.value.append(index)  # Store the index of the element in the known object\n    return index  # Return the index of the added element\n\ndef _loop(keys, input, known, output):\n    # Function to process elements in an array\n    for key in keys:\n        value = output[key]  # Get the value of the element from the known object\n        if isinstance(value, _String):  # If the value is a string\n            _ref(key, input[int(value.value)], input, known, output)  # Call the ref function to process the string\n\n    return output  # Return the final output list

def _ref(key, value, input, known, output):\n    # Function to add an element to the known object and process it as a string\n    if _is_array(value) and value not in known:\n        known.append(value)\n        value = _loop(_array_keys(value), input, known, value)\n    elif _is_object(value) and value not in known:\n        known.append(value)\n        value = _loop(_object_keys(value), input, known, value)\n\n    output[key] = value  # Store the processed element in the known object\n\ndef _relate(known, input, value):\n    # Function to process an array of elements and relate them\n    if _is_string(value) or _is_array(value) or _is_object(value):\n        try:\n            return known.value[known.key.index(value)]  # Return the element from the known object by index\n        except:\n            return _index(known, input, value)\n\n    return value  # Return the original value

def _transform(known, input, value):\n    # Function to transform an array of elements into a dictionary\n    if _is_array(value):\n        output = []\n        for val in value:\n            output.append(_relate(known, input, val))  # Call the relate function to process each element\n        return output\n\n    if _is_object(value):\n        obj = {}\n        for key in value:\n            obj[key] = _relate(known, input, value[key])\n        return obj\n\n    return value  # Return the original value

def _wrap(value):\n    # Function to wrap an object into a string\n    if _is_string(value):\n        return _String(value)\n\n    if _is_array(value):\n        i = 0\n        for val in value:\n            value[i] = _wrap(val)\n            i += 1\n\n    elif _is_object(value):\n        obj = {}\n        for key in value:\n            obj[key] = _wrap(value[key])\n\n    return value\n\ndef parse(value, *args, **kwargs):\n    json = _json.loads(value, *args, **kwargs)\n    wrapped = []  # List to store wrapped objects\n    for value in json:\n        wrapped.append(_wrap(value))  # Wrap each object and append it to the list\n\n    input = []  # List to store input elements\n    output = []  # List to store outputs\n\n    i = int(_index(known, input, value))  # Process the input element by index\n    while i < len(input):\n        output.append(_transform(known, input, input[i]))\n        i += 1\n\n    return _json.dumps(output, *args, **kwargs)  # Convert the output list to a JSON string

def stringify(value, *args, **kwargs):\n    known = _Known()\n    input = []  # List to store input elements\n    output = []  # List to store outputs\n\n    i = int(_index(known, input, value))  # Process the input element by index\n    while i < len(input):\n        output.append(_transform(known, input, input[i]))\n        i += 1\n\n    return _json.dumps(output, *args, **kwargs)  # Convert the output list to a JSON string